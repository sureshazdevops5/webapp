name: dot net package
on: workflow_dispatch
jobs:
  build:
   runs-on: ubuntu-latest

   steps:
    - uses: actions/checkout@v4

    - name: dotnet setup
      uses: actions/setup-dotnet@v4
      with:
       dotnet-version: '6.x'

    - name: display dotnet version
      run: dotnet --version

    - name: Install dependencies
      run: dotnet restore
   
    - name: dotnet build
      run: dotnet build

    - name: Upload dotnet build results
      uses: actions/upload-artifact@v4
      with:
        path: /home/runner/work/webapp/

    - name: Azure Login via OIDC
      uses: azure/login@v1
      with:
        client-id: 710b93b9-2fb7-4921-b45d-10fe45488c4d
        tenant-id: d52325e9-0810-46ae-89ca-93a81ab43fb7
        subscription-id: 082a5822-b215-41a0-919f-0527e9956494
        
    - name: Deploy to Azure Web App
      uses: azure/webapps-deploy@v2
      with:
        app-name: suretestapp
        package: /home/runner/work/webapp/
